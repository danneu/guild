{% extends 'layouts/master.html' %}

{% block embed %}
  <ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li>Search Users</li>
  </ol>

  <div class="page-header">
    <h1>
      <a href="/search/users">Search Users</a>
    </h1>
  </div>

  <div class="row">
    <div class="col-xs-6">

      
      <!-- Search bar -->
      <form name="search-bar">
        <input type=text name="text" placeholder="Search users" style="background-color: #222020; border-color: #000000"></input>
        <input type=submit value="Search" style="background-color: #222020; border-color: #000000"></input>
      </form>

      <!-- Search results -->
      <a name="search-results"></a>
      <h3>Search Results</h3>

      <!-- Pagination -->

      {% if usersList.length-1 > 1 || beforeId %}
        <ul class="pager">
          <li>
            <a href="{{ ctx.request.path }}#search-results">
              First Page
            </a>
          </li>
          {% if usersList.length < usersPerPage %}
            <li class="disabled">
              <a href="{{ ctx.request.url }}">
                Next Page &rarr;
              </a>
            </li>
          {% else %}
            <li>
              {% if text == null %}
              <a href="{{ ctx.request.path }}?text={{ text }}&?before-id={{ nextBeforeId }}#search-results">
              {% else %}
              <a href="{{ ctx.request.path }}?before-id={{ nextBeforeId }}#search-results">
              {% endif %}
                Next Page &rarr;
              </a>
            </li>
          {% endif %}
        </ul>
      {% endif %}

      <!-- Users list -->

      {% if usersList.length === 0 %}
        <div class="well">
          No users found
        </div>
      {% endif %}

      {% for user in usersList %} <!-- TODO: -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <a href="/users/{{ user.id }}" style="color: #ffc300">
              {{ user.uname }}
            </a>
            {% if user.last_online_at != null %}
            Last Online:
            <abbr class="timeago" title="{{ user.last_online_at.toISOString() }}">
              {{ user.last_online_at|formatDate }}
            </abbr>
            {% endif %}
            {% if user.oldguild_uname != null %}
              Oldguild: {{ user.oldguild_uname }}
            {% endif %}
          </div>
        </div>
      {% endfor %}


      <!-- Pagination -->

      {% if usersList.length-1 > 1 || beforeId %}
        <ul class="pager">
          <li>
            <a href="{{ ctx.request.path }}#search-results">
              First Page
            </a>
          </li>
          {% if usersList.length < usersPerPage %}
            <li class="disabled">
              <a href="{{ ctx.request.url }}">
                Next Page &rarr;
              </a>
            </li>
          {% else %}
            <li>
              {% if text == null %}
              <a href="{{ ctx.request.path }}?text={{ text }}&?before-id={{ nextBeforeId }}#search-results">
              {% else %}
              <a href="{{ ctx.request.path }}?before-id={{ nextBeforeId }}#search-results">
              {% endif %}
                Next Page &rarr;
              </a>
            </li>
          {% endif %}
        </ul>
      {% endif %}

    </div> <!-- /.col-6 -->
  </div> <!-- /.row -->


{% block scripts %}
{% endblock %}